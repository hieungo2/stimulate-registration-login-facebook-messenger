// get posts
getPosts();

var title = document.getElementById("title");
var content = document.getElementById("post-content");

document.getElementById("btn-send").addEventListener("click", requestPostData);


function requestPostData() {
    var data = {
        "title": title.value,
        "content": content.value,
    }
    $.ajax({
        url: "https://be-sub-facebook-team.herokuapp.com/posts/new",
        method: "POST",
        data: data,
        success: function(response) {
            location.reload();
        },
        error: function(jqXHR, textStatus, errorThrown) {
            console.log(textStatus);
        }
    })
}

function getPosts() {
    $.ajax({
        url: "https://be-sub-facebook-team.herokuapp.com/posts",
        method: "GET",
        success: function(response) {
            var html = '';
            $.each(response, function(key, value) {
                console.log();
                html += `
                    <div class='post-user'>
                        <div class="sender">
                            <div class="sender-avt">
                                <img src="./images/avt.jpg" alt="avt" style="width: 56px; height: 56px; border-radius: 50%; cursor: pointer;">
                                <div class="infor-sender">
                                    <a href="" class="sender-name">Grizz</a>
                                    <p class="sender-time">${moment(value['created_at']).fromNow()}</p>
                                </div>
                                <div class="more-choose">
                                    <i class="ti-more-alt">
                                        <ul class="body-choose">
                                            <li class="row1">Lưu bài viết</li>
                                            <li class="row2">Bật thông báo về bài viết này</li>
                                            <li>Ẩn bài viết</li>
                                            <li>Tạm ẩn Grizz trong 30 ngày</li>
                                            <li>Bỏ theo dõi Grizz</li>
                                            <li class="row5">Tìm hỗ trợ hoặc báo cáo về bài viết</li>                                      
                                        
                                        </ul>
                                    </i>
                                </div>
                            </div>
                        </div>


                        <div class="posts-body">
                            <p class="paragraph-posts1">${value['title']}</p>
                            <p class="paragraph-posts2">${value['content']}</p>
                            <div class="image-posts">
                                <img src="./images/posts.jpg" alt="">
                            </div>
                        </div>


                        <div class="interac-top">
                            <div class="icon-inter">
                                    <i class="far fa-thumbs-up">100
                                        <ul class="name-liker">
                                        <li>Panda</li>
                                            <li>Bee</li>
                                            <li>Bear</li>
                                         <li>Pig</li>
                                            <li>Và 96 người khác...</li>
                                        </ul>
                                    </i>
                            </div>
                            <div class="count">
                                <p class="count-people">100 người comment</p>
                                <p class="people-share">100 lượt share
                                    <ul class="name-sharer">
                                        <li>Pororo</li>
                                        <li>Bee</li>
                                        <li>Bear</li>
                                        <li>Pig</li>
                                        <li>Và 96 người khác...</li>
                                    </ul>
                                </p>
                            </div>
                        </div>

                        <div class="interac-under">
                            <div class="icon-like">
                                
                                <i class="far fa-thumbs-up">Like
                        
                                    <ul class="appear-react-hover">
                                

                                    <li> 
                                        <svg viewBox="0 0 100 100" width="100" xmlns="http://www.w3.org/2000/svg"><path d="M50 0c-27.615 0-50 22.385-50 50 0 27.614 22.386 50 50 50s50-22.387 50-50c0-27.615-22.387-50-50-50z" fill="#3E4F71"/><path d="M47.985 68.99c-1.021 0-1.746-.787-1.995-.941-.797-.49-.603-.627-2.045-1.057l-4.038.01c-.503 0-.911-.404-.911-.902v-19.218c0-.499.408-.902.911-.902h5.342c.126-.068.518-.402 1.213-1.187 1.227-1.382 2.312-3.262 3.362-4.927.849-1.346 1.65-2.619 2.496-3.667 1.157-1.439 1.883-1.966 2.584-2.477.721-.522.574-.641 2.009-2.475 2.3-2.938 2.613-4.807 2.917-6.615.054-.32.109-.651.175-.981.259-1.307 1.405-2.659 2.876-2.658.53-.001 1.047.174 1.537.518 1.879 1.319 2.866 5.158 2.494 7.708-.383 2.619-1.578 6.005-2.681 7.23-.958 1.066-1.41 2.122-1.212 3.746.094.773 1.283.804 1.334.806l7.439.028c2.15.018 6.212.69 6.213 4.843 0 1.894-.77 3.071-1.666 3.757.852.758 1.516 1.742 1.278 3.609-.23 1.812-1.128 2.894-2.173 3.448.577.771.967 1.886.712 3.397-.245 1.455-1.134 2.469-2.048 2.961.431.658.699 1.666.473 2.869-.533 2.822-2.977 2.985-4.02 3.056l-.323.021h-22.253z" fill="#EFEFEF"/><path d="M76.34 49.629c.896-.686 1.666-1.863 1.666-3.757-.001-4.153-4.062-4.826-6.213-4.843l-7.439-.029c-.051-.002-1.24-.032-1.334-.806-.198-1.624.254-2.68 1.212-3.746 1.103-1.225 2.298-4.611 2.681-7.23.372-2.55-.615-6.389-2.494-7.708-.49-.344-1.007-.519-1.537-.518-.553 0-1.061.191-1.492.5l.029.018c1.879 1.319 2.866 5.158 2.494 7.708-.383 2.619-1.578 6.005-2.681 7.23-.958 1.066-1.41 2.122-1.212 3.746.094.773 1.283.804 1.334.806l7.439.028c2.15.018 6.212.69 6.213 4.843 0 1.894-.77 3.071-1.666 3.757.852.758 1.516 1.742 1.278 3.609-.23 1.812-1.128 2.894-2.173 3.448.577.771.967 1.886.712 3.397-.245 1.455-1.134 2.469-2.048 2.961.431.658.699 1.666.473 2.869-.533 2.822-2.977 2.985-4.02 3.056l-.323.021h3l.323-.021c1.043-.07 3.486-.233 4.02-3.056.227-1.203-.042-2.211-.473-2.869.914-.492 1.803-1.506 2.048-2.961.255-1.512-.135-2.627-.712-3.397 1.045-.555 1.942-1.636 2.173-3.448.237-1.866-.427-2.85-1.278-3.608zm-36.465 17.366l.032.007 1.059-.003-.021-.007-1.07.003zM76.34 49.629c.896-.686 1.666-1.863 1.666-3.757-.001-4.153-4.062-4.826-6.213-4.843l-7.439-.029c-.051-.002-1.24-.032-1.334-.806-.198-1.624.254-2.68 1.212-3.746 1.103-1.225 2.298-4.611 2.681-7.23.372-2.55-.615-6.389-2.494-7.708-.49-.344-1.007-.519-1.537-.518-.553 0-1.061.191-1.492.5l.029.018c1.879 1.319 2.866 5.158 2.494 7.708-.383 2.619-1.578 6.005-2.681 7.23-.958 1.066-1.41 2.122-1.212 3.746.094.773 1.283.804 1.334.806l7.439.028c2.15.018 6.212.69 6.213 4.843 0 1.894-.77 3.071-1.666 3.757.852.758 1.516 1.742 1.278 3.609-.23 1.812-1.128 2.894-2.173 3.448.577.771.967 1.886.712 3.397-.245 1.455-1.134 2.469-2.048 2.961.431.658.699 1.666.473 2.869-.533 2.822-2.977 2.985-4.02 3.056l-.323.021h3l.323-.021c1.043-.07 3.486-.233 4.02-3.056.227-1.203-.042-2.211-.473-2.869.914-.492 1.803-1.506 2.048-2.961.255-1.512-.135-2.627-.712-3.397 1.045-.555 1.942-1.636 2.173-3.448.237-1.866-.427-2.85-1.278-3.608zm-36.465 17.366l.032.007 1.059-.003-.021-.007-1.07.003z" fill="#DCDCDC"/><path d="M38.998 46.008h3.018v21h-3.018v-21z" fill="#D7D7D7"/><path d="M37.68 70.001h-11.067c-1.274 0-2.312-1.04-2.312-2.317l-3.304-21.38c0-1.279 1.037-2.318 2.311-2.318h14.372c1.275 0 2.312 1.039 2.312 2.318v21.38c-.001 1.277-1.038 2.317-2.312 2.317z" fill="#5879BD"/><path d="M33.993 61.006c1.105 0 2.001.895 2.001 1.999 0 1.103-.896 1.997-2.001 1.997s-2.002-.895-2.002-1.997c0-1.105.896-1.999 2.002-1.999z" fill="#fff"/><path d="M39.68 68.001h-11.067c-1.274 0-2.312-1.04-2.312-2.317l-3.304-21.38.029-.289c-1.141.141-2.029 1.107-2.029 2.289l3.304 21.38c0 1.277 1.037 2.317 2.312 2.317h11.067c1.176 0 2.139-.889 2.282-2.028l-.282.028z" fill="#5170AE"/><path d="M33.993 65.002c-1.105 0-2.002-.895-2.002-1.997 0-.292.066-.568.179-.818-.694.313-1.179 1.008-1.179 1.818 0 1.103.896 1.997 2.002 1.997.813 0 1.51-.486 1.823-1.181-.252.114-.529.181-.823.181z" fill="#48639A"/></svg>
                                    </li>

                                    <li>                                         
                                        <svg enable-background="new 0 0 64 64" version="1.1" viewBox="0 0 64 64" width="64px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g id="Layer_1"><g><circle cx="32" cy="32" fill="#C75C5C" r="32"/></g><g opacity="0.2"><g><path d="M49.982,31.003c-0.094-5.522-4.574-10.442-10.107-10.442c-3.2,0-6.019,1.674-7.875,4.131     c-1.856-2.457-4.676-4.131-7.875-4.131c-5.533,0-10.012,4.921-10.107,10.442H14c0,0.034,0.007,0.065,0.007,0.099     c0,0.025-0.007,0.049-0.007,0.076c0,0.155,0.038,0.272,0.045,0.421c0.495,14.071,17.813,19.84,17.813,19.84     s17.572-5.762,18.092-19.818C49.959,31.464,50,31.34,50,31.178c0-0.027-0.007-0.052-0.007-0.076c0-0.036,0.007-0.065,0.007-0.099     H49.982z" fill="#231F20"/></g></g><g><g><path d="M49.982,29.003c-0.094-5.522-4.574-10.442-10.107-10.442c-3.2,0-6.019,1.674-7.875,4.131     c-1.856-2.457-4.676-4.131-7.875-4.131c-5.533,0-10.012,4.921-10.107,10.442H14c0,0.034,0.007,0.065,0.007,0.099     c0,0.025-0.007,0.049-0.007,0.076c0,0.155,0.038,0.272,0.045,0.421c0.495,14.071,17.813,19.84,17.813,19.84     s17.572-5.762,18.092-19.818C49.959,29.464,50,29.34,50,29.178c0-0.027-0.007-0.052-0.007-0.076c0-0.036,0.007-0.065,0.007-0.099     H49.982z" fill="#FFFFFF"/></g></g></g><g id="Layer_2"/></svg>
                                    </li>

                                    <li> 
                                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64" enable-background="new 0 0 64 64"><circle cx="32" cy="32" r="30" fill="#ffdd67"/><g fill="#664e27"><path d="m51.7 19.4c.6.3.3 1-.2 1.1-2.7.4-5.5.9-8.3 2.4 4 .7 7.2 2.7 9 4.8.4.5-.1 1.1-.5 1-4.8-1.7-9.7-2.7-15.8-2-.5 0-.9-.2-.8-.7 1.6-7.3 10.9-10 16.6-6.6"/><path d="m12.3 19.4c-.6.3-.3 1 .2 1.1 2.7.4 5.5.9 8.3 2.4-4 .7-7.2 2.7-9 4.8-.4.5.1 1.1.5 1 4.8-1.7 9.7-2.7 15.8-2 .5 0 .9-.2.8-.7-1.6-7.3-10.9-10-16.6-6.6"/><path d="m49.7 34.4c-.4-.5-1.1-.4-1.9-.4-15.8 0-15.8 0-31.6 0-.8 0-1.5-.1-1.9.4-3.9 5 .7 19.6 17.7 19.6 17 0 21.6-14.6 17.7-19.6"/></g><path d="m33.8 41.7c-.6 0-1.5.5-1.1 2 .2.7 1.2 1.6 1.2 2.8 0 2.4-3.8 2.4-3.8 0 0-1.2 1-2 1.2-2.8.3-1.4-.6-2-1.1-2-1.6 0-4.1 1.7-4.1 4.6 0 3.2 2.7 5.8 6 5.8s6-2.6 6-5.8c-.1-2.8-2.7-4.5-4.3-4.6" fill="#4c3526"/><path d="m24.3 50.7c2.2 1 4.8 1.5 7.7 1.5s5.5-.6 7.7-1.5c-2.1-1.1-4.7-1.7-7.7-1.7s-5.6.6-7.7 1.7" fill="#ff717f"/><path d="m47 36c-15 0-15 0-29.9 0-2.1 0-2.1 4-.1 4 10.4 0 19.6 0 30 0 2 0 2-4 0-4" fill="#fff"/></svg>
                                    </li>

                                    <li> 
                                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64" enable-background="new 0 0 64 64"><circle cx="32" cy="32" r="30" fill="#ffdd67"/><circle cx="19" cy="29" r="11" fill="#fff"/><path d="m24 29c0 2.8-2.2 5-5 5-2.8 0-5-2.2-5-5s2.2-5 5-5c2.8 0 5 2.2 5 5" fill="#664e27"/><path d="m56 29c0 6.1-4.9 11-11 11-6.1 0-11-4.9-11-11 0-6.1 4.9-11 11-11 6.1 0 11 4.9 11 11" fill="#fff"/><path d="m50 29c0 2.8-2.2 5-5 5-2.8 0-5-2.2-5-5s2.2-5 5-5c2.8 0 5 2.2 5 5" fill="#664e27"/><g fill="#917524"><path d="m50.2 15.8c-3.2-2.7-7.5-3.9-11.7-3.1-.6.1-1.1-2-.4-2.2 4.8-.9 9.8.5 13.5 3.6.6.5-1 2.1-1.4 1.7"/><path d="m25.5 12.5c-4.2-.7-8.5.4-11.7 3.1-.4.4-2-1.2-1.4-1.7 3.7-3.2 8.7-4.5 13.5-3.6.7.2.2 2.3-.4 2.2"/></g><circle cx="32" cy="49" r="9" fill="#664e27"/><path d="m26 46c1.2-2.4 3.4-4 6-4 2.6 0 4.8 1.6 6 4h-12" fill="#fff"/></svg>
                                    </li>

                                    <li>  
                                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64" enable-background="new 0 0 64 64"><path d="M2,32c0,16.6,13.4,30,30,30s30-13.4,30-30S48.6,2,32,2S2,15.4,2,32z" fill="#ffdd67"/><path d="m47.7 37.6c0 8.6 11.7 8.6 11.7 0 0-6.3-5.8-12.4-5.8-12.4s-5.9 6.1-5.9 12.4" fill="#65b1ef"/><g fill="#664e27"><circle cx="38.5" cy="35" r="5"/><circle cx="15.5" cy="35" r="5"/></g><g fill="#917524"><path d="m20.6 19.9c-3.2 2.7-7.5 3.9-11.7 3.1-.6-.1-1.1 2-.4 2.2 4.8.9 9.8-.5 13.5-3.6.5-.5-1-2.1-1.4-1.7"/><path d="m45.1 22.9c-4.2.7-8.5-.4-11.7-3.1-.4-.4-2 1.2-1.4 1.7 3.7 3.2 8.7 4.5 13.5 3.6.7-.2.2-2.3-.4-2.2"/></g><path d="m38.1 47.3c-5.8-1.5-12-.4-16.9 3-1.2.9 1.1 4 2.3 3.2 3.2-2.3 8.4-3.8 13.7-2.4 1.3.3 2.4-3.3.9-3.8" fill="#664e27"/></svg>
                                    </li>

                                    <li>   
                                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64" enable-background="new 0 0 64 64"><circle cx="32" cy="32" r="30" fill="#ef5350"/><path d="m41 49.7c-5.8-4.8-12.2-4.8-18 0-.7.6-1.3-.4-.8-1.3 1.8-3.4 5.3-6.5 9.8-6.5s8.1 3.1 9.8 6.5c.5.8-.1 1.8-.8 1.3" fill="#302424"/><path d="m10.2 24.9c-1.5 4.7.6 10 5.3 12.1 4.6 2.2 10 .5 12.7-3.7l-6.9-7.7-11.1-.7" fill="#fff"/><g fill="#302424"><path d="m14.2 25.8c-1.4 2.9-.1 6.4 2.8 7.7 2.9 1.4 6.4.1 7.7-2.8 1-1.9-9.6-6.8-10.5-4.9"/><path d="m10.2 24.9c1.6-1 3.5-1.5 5.4-1.5 1.9 0 3.8.5 5.6 1.3 1.7.8 3.3 2 4.6 3.4 1.2 1.5 2.2 3.2 2.4 5.1-1.3-1.3-2.6-2.4-4-3.4-1.4-1-2.8-1.8-4.2-2.4-1.5-.7-3-1.2-4.6-1.7-1.8-.3-3.4-.6-5.2-.8"/></g><path d="m53.8 24.9c1.5 4.7-.6 10-5.3 12.1-4.6 2.2-10 .5-12.7-3.7l6.9-7.7 11.1-.7" fill="#fff"/><g fill="#302424"><path d="m49.8 25.8c1.4 2.9.1 6.4-2.8 7.7-2.9 1.4-6.4.1-7.7-2.8-1-1.9 9.6-6.8 10.5-4.9"/><path d="m53.8 24.9c-1.6-1-3.5-1.5-5.4-1.5-1.9 0-3.8.5-5.6 1.3-1.7.8-3.3 2-4.6 3.4-1.2 1.5-2.2 3.2-2.4 5.1 1.3-1.3 2.6-2.4 4-3.4 1.4-1 2.8-1.8 4.2-2.4 1.5-.7 3-1.2 4.6-1.7 1.8-.3 3.4-.6 5.2-.8"/></g></svg>
                                    </li>                                        
                                </ul> 
                                </i>

                            </div>
                            <div class="icon-cmt">
                                <i class="ti-comment">Comment</i>
                            </div>
                            <div class="icon-share">
                                <i class="ti-share">Share</i>
                            </div>
                        </div>

                        <div class="comment">
                            <div class="people-cmt-avt">
                                <img src="./images/cmt-avt.jpg" alt="avt" style="width: 56px; height: 56px; border-radius: 50%; cursor: pointer;">
                            </div>
                            <div class="border-cmt">
                                <input type="text" class="form-control" placeholder="Nhap binh luan" required />
                            </div>
                        </div>
                    </div>
                `;
            });
            document.getElementById("post-result").innerHTML = html;
        },
        error: function(jqXHR, textStatus, errorThrown) {
            console.log(textStatus);
        }
    })
}